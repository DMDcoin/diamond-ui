import{b as v,d as D,r as o,g as y,j as e}from"./index-en87ZZnQ.js";const L="_tableContainer_1e85g_1",k="_tablePagination_1e85g_19",I="_loader_1e85g_27",E="_styledTable_1e85g_40",R="_loading_1e85g_1",A="_tableBodyRow_1e85g_99",n={tableContainer:L,tablePagination:k,loader:I,styledTable:E,loading:R,tableBodyRow:A},z=N=>{const{data:u,searchQuery:r,filterQuery:i,handleDetailsClick:_,getStateString:f,itemsPerPage:d=10,columns:g=[]}=N,b=v(),m=D(),[j,P]=o.useState(0),[l,w]=o.useState(1),[S,p]=o.useState([]),[C,B]=o.useState([]),h=["Date","Account","Title","Type",...g.length>0?g:["Status"],"",""];o.useEffect(()=>{let t=u;i&&(i==="unfinalized"?t=t.filter(s=>s.state==="3"):i==="myProposals"&&(t=t.filter(s=>{var c;return s.proposer===((c=b.userWallet)==null?void 0:c.myAddr)}))),r&&(t=t.filter(s=>s.proposer.toLowerCase().match(r.toLowerCase())||s.description.toLowerCase().match(r.toLowerCase())||f(s.state).toLowerCase().match(r.toLowerCase())||y(s.timestamp).toLowerCase().match(r.toLowerCase()))),t.sort((s,c)=>c.timestamp-s.timestamp);const a=l*d,T=a-d;B(t.slice(T,a)),P(Math.ceil(t.length/d)),p(t)},[u,i,r,l,b.userWallet.myAddr]);const x=t=>{w(t)};return e.jsxs("div",{className:n.tableContainer,children:[e.jsx("div",{children:e.jsxs("table",{className:n.styledTable,children:[e.jsx("thead",{children:e.jsx("tr",{children:h.map((t,a)=>e.jsx("th",{children:t},a))})}),e.jsx("tbody",{children:C.length?C.map((t,a)=>e.jsxs("tr",{className:n.tableBodyRow,onClick:()=>_(t.id),children:[e.jsx("td",{children:y(t.timestamp)||e.jsx("div",{className:n.loader})}),e.jsx("td",{children:t.proposer||e.jsx("div",{className:n.loader})}),e.jsx("td",{children:t.title||e.jsx("div",{className:n.loader})}),e.jsx("td",{children:t.proposalType||e.jsx("div",{className:n.loader})}),h.length>0&&e.jsx("td",{children:m.getStateString(t.state)!=="Unknown"?m.getStateString(t.state):e.jsx("div",{className:n.loader})}),e.jsx("td",{children:t.state==="3"?e.jsx("button",{className:"primaryBtn",children:"Needs Finalization"}):t.state==="4"&&m.daoPhase.daoEpoch==Number(t.daoPhaseCount)+1?e.jsx("button",{className:"primaryBtn",children:"Needs Execution"}):e.jsx("button",{className:"primaryBtnHidden"})}),e.jsx("td",{})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:h.length,className:n.noData,children:"No proposals found"})})})]})}),S.length>d&&e.jsxs("div",{className:n.tablePagination,children:[e.jsx("button",{className:"primaryBtn",disabled:l===1,onClick:()=>x(l-1),children:"Previous"}),Array.from({length:j},(t,a)=>e.jsx("button",{className:"primaryBtn",onClick:()=>x(a+1),disabled:l===a+1,children:a+1},a)),e.jsx("button",{className:"primaryBtn",disabled:l===j,onClick:()=>x(l+1),children:"Next"})]})]})};export{z as P};
