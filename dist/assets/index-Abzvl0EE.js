import{u as S,d as _,b as m,r as e,j as s}from"./index-en87ZZnQ.js";import{P as j}from"./index-1c5K0dfp.js";import{N as v}from"./index-Cq5ZB-Us.js";const y="_sectionContainer_usy9l_5",N="_historicProposalsInfoContainer_usy9l_9",H="_historicProposalsHeading_usy9l_24",D="_filterActive_usy9l_42",I="_historicProposalsSearch_usy9l_47",b="_filterContainer_usy9l_63",a={sectionContainer:y,historicProposalsInfoContainer:N,historicProposalsHeading:H,filterActive:D,historicProposalsSearch:I,filterContainer:b},w=()=>{const c=S(),o=_(),i=m(),[h,p]=e.useState(!1),[d,u]=e.useState(""),[x,f]=e.useState("");e.useState(!0);const[r,n]=e.useState(),g=t=>{e.startTransition(()=>{c(`/dao/details/${t}`)})};return e.useEffect(()=>{if(!h)i.showLoader(!0,"Fetching historic proposals"),o.getHistoricProposals(),p(!0);else{const t=o.allDaoProposals.length;t>0&&i.showLoader(!1,"");const P=o.allDaoProposals.filter(C=>C.state!=="").length,l=Math.round(P/t*100);n(l===100?null:`Indexing: ${l}% complete`)}},[o.allDaoProposals]),s.jsx("section",{className:"section",children:s.jsxs("div",{className:a.sectionContainer+" sectionContainer",children:[s.jsx(v,{start:"/dao"}),s.jsx("div",{className:a.historicProposalsInfoContainer,children:s.jsxs("div",{children:[s.jsx("h1",{className:a.historicProposalsHeading,children:"Historic Proposals"}),s.jsxs("div",{className:a.filterContainer,children:[s.jsx("input",{type:"text",placeholder:"Search",className:a.historicProposalsSearch,onChange:t=>f(t.target.value)}),s.jsxs("select",{className:a.historicProposalsSelect,onChange:t=>u(t.target.value),children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"unfinalized",children:"Unfinalized"}),s.jsx("option",{value:"myProposals",children:"My proposals"})]})]}),s.jsx("div",{children:r||""})]})}),s.jsx(j,{data:o.allDaoProposals,handleDetailsClick:g,getStateString:o.getStateString,searchQuery:x,filterQuery:d,columns:["Result"]})]})})};export{w as default};
