import{r as o,u as m,j as e,d as u,b as x}from"./index-en87ZZnQ.js";const P="_daoPhaseBanner_1rejj_1",C={daoPhaseBanner:P},f="_modalOverlay_1kd8n_1",j="_modalContent_1kd8n_14",v="_modalClose_1kd8n_24",p={modalOverlay:f,modalContent:j,modalClose:v},E=({buttonText:c})=>{const[s,i]=o.useState(!1),t=o.useRef(null),h=m(),d=()=>i(!0),n=()=>i(!1);return o.useEffect(()=>{const a=r=>{r.key==="Escape"&&n()},l=r=>{t.current&&!t.current.contains(r.target)&&n()};return s&&(document.addEventListener("keydown",a),document.addEventListener("mousedown",l)),()=>{document.removeEventListener("keydown",a),document.removeEventListener("mousedown",l)}},[s]),e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"primaryBtn",onClick:a=>{a.stopPropagation(),d()},children:c}),s&&e.jsx("div",{onClick:a=>a.stopPropagation(),className:p.modalOverlay,children:e.jsxs("div",{onClick:a=>a.stopPropagation(),className:p.modalContent,ref:t,children:[e.jsx("button",{className:p.modalClose,onClick:n,children:"Ã—"}),e.jsx("h3",{children:"Proposal creation is not available"}),e.jsxs("section",{children:[e.jsx("p",{children:"New proposals can not be created till all the proposals from previous phases are not finalized. Anyone can finalize them with minimal fee cost. Please go to Historic proposals list and finalize those, which have the status 'needs finalization'"}),e.jsx("button",{onClick:()=>{o.startTransition(()=>{h("/dao/historic")})},className:"primaryBtn",children:"Go to the list"})]})]})})]})},y=()=>{var d,n,a,l;const c=m(),s=u(),i=x(),[t,h]=o.useState(!0);return o.useEffect(()=>{i.contractsManager.daoContract.methods.unfinalizedProposalsExist().call().then(r=>{h(r)})},[s.allDaoProposals,s.daoPhaseCount]),e.jsxs("div",{className:C.daoPhaseBanner,children:[((d=s.daoPhase)==null?void 0:d.phase)==="1"&&e.jsx("div",{}),e.jsxs("h4",{children:[((n=s.daoPhase)==null?void 0:n.phase)==="0"?"Proposal":"Voting"," Phase ",s.daoPhaseCount]}),e.jsxs("p",{children:[s.phaseEndTimer," till the end"]}),((a=s.daoPhase)==null?void 0:a.phase)==="1"?e.jsx("p",{}):t?e.jsx(E,{buttonText:"Create Proposal"}):((l=s.daoPhase)==null?void 0:l.phase)==="0"&&e.jsx("button",{className:"primaryBtn",onClick:()=>{o.startTransition(()=>{c("/dao/create")})},children:"Create Proposal"})]})};export{y as D};
