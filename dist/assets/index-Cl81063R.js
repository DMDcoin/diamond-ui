import{u as z,e as I,b as E,a as L,r as x,B as d,j as e,F as h}from"./index-en87ZZnQ.js";import{J as O,d as R,S as U,U as W}from"./index-DU_CEnDr.js";import{T as v,f as u}from"./index-DjtZ4zdu.js";const G="_sectionContainer_1esl2_1",q="_tableContainer_1esl2_11",J="_styledTable_1esl2_23",$="_pagination_1esl2_87",H="_active_1esl2_112",K="_disabled_1esl2_118",Q="_tableBodyRow_1esl2_123",X="_loader_1esl2_128",Y="_loading_1esl2_1",Z="_poolActive_1esl2_155",ee="_poolBanned_1esl2_159",te="_filterContainer_1esl2_163",s={sectionContainer:G,tableContainer:q,styledTable:J,pagination:$,active:H,disabled:K,tableBodyRow:Q,loader:X,loading:Y,poolActive:Z,poolBanned:ee,filterContainer:te},se=({itemsPerPage:g=10})=>{const w=z(),k=I(),{userWallet:C}=E(),{pools:T,stakingEpoch:p,claimOrderedUnstake:V}=L(),[r,f]=x.useState(0),[o,_]=x.useState("default"),[j,B]=x.useState(""),[a,F]=x.useState(null);x.useEffect(()=>{var t;(t=k.state)!=null&&t.filter&&_(k.state.filter)},[k.state]);const D=t=>{_(t.target.value),f(0)},P=t=>{B(t.target.value),f(0)};let n=[...T];o==="valid"?n=n.filter(t=>t.isActive&&!t.isCurrentValidator):o==="active"?n=n.filter(t=>t.isCurrentValidator):o==="invalid"?n=n.filter(t=>!t.isCurrentValidator&&!t.isActive):o==="stakedOn"&&(n=n.filter(t=>d(t.myStake).isGreaterThan(0))),j.trim()!==""&&(n=n.filter(t=>t.stakingAddress.toLowerCase().includes(j.toLowerCase())||t.miningAddress&&t.miningAddress.toLowerCase().includes(j.toLowerCase()))),a!==null&&n.sort((t,i)=>{const m=a.key==="myStake"?parseFloat(t[a.key]||"0"):t[a.key],A=a.key==="myStake"?parseFloat(i[a.key]||"0"):i[a.key];return m<A?a.direction==="ascending"?-1:1:m>A?a.direction==="ascending"?1:-1:0});const y=Math.ceil(n.length/g),N=r*g,S=n.slice(N,N+g),b=t=>{f(t)},c=t=>{let i="ascending";a&&a.key===t&&a.direction==="ascending"&&(i="descending"),F({key:t,direction:i})},l=t=>{if(a)return a.key===t?a.direction:void 0},M=()=>{const t=[];for(let i=0;i<y;i++)t.push(e.jsx("li",{className:r===i?s.active:"",onClick:()=>b(i),children:i+1},i));return t};return e.jsxs("div",{className:s.sectionContainer+" sectionContainer",children:[e.jsx("h1",{children:"Validator Candidates"}),e.jsxs("div",{className:s.filterContainer,children:[e.jsx("input",{type:"text",placeholder:"Search by address",value:j,onChange:P}),e.jsxs("select",{id:"filter",value:o,onChange:D,children:[e.jsx("option",{value:"default",children:"All"}),e.jsx("option",{value:"valid",children:"Valid Candidates"}),e.jsx("option",{value:"active",children:"Active Candidates"}),e.jsx("option",{value:"invalid",children:"Invalid Candidates"}),e.jsx("option",{value:"stakedOn",children:"Candidates I've staked on"})]})]}),e.jsx("div",{className:s.tableContainer,children:e.jsxs("table",{className:s.styledTable,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsxs("th",{className:l("isCurrentValidator"),onClick:()=>c("isCurrentValidator"),children:["Status",e.jsx(v,{text:"Active candidate is part of the active set; Valid - is not part of the active set, but can be elected; Invalid - a candidate, who is inactive for some period of time"}),e.jsx(h,{icon:u,size:"xs"})]}),e.jsx("th",{className:l("stakingAddress"),children:"Wallet"}),e.jsxs("th",{className:l("totalStake"),onClick:()=>c("totalStake"),children:["Total Stake",e.jsx(v,{text:"Total delegated DMD (self-staked DMD + delegates' stake)"}),e.jsx(h,{icon:u,size:"xs"})]}),e.jsxs("th",{className:l("votingPower"),onClick:()=>c("votingPower"),children:["Voting Power",e.jsx(v,{text:"Value that approximates a nodeâ€™s influence in the DAO participation"}),e.jsx(h,{icon:u,size:"xs"})]}),e.jsxs("th",{className:l("score"),onClick:()=>c("score"),children:["Score",e.jsx(v,{text:`Combined score value, based on the results of generating the shared key,
                                the stability of the validator connection and misbehaviour reports from other validators`}),e.jsx(h,{icon:u,size:"xs"})]}),e.jsx("th",{className:l("myStake"),onClick:()=>c("myStake"),children:C.myAddr?e.jsxs(e.Fragment,{children:["My stake ",e.jsx(h,{icon:u,size:"xs"})]}):""}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:S.length<=0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:s.noData,children:"No validators found"})}):S.map((t,i)=>e.jsxs("tr",{onClick:()=>w(`/staking/details/${t.stakingAddress}`),className:s.tableBodyRow,children:[e.jsx("td",{children:e.jsx(O,{diameter:40,seed:R.jsNumberForAddress(t.stakingAddress)})}),e.jsx("td",{className:t!=null&&t.isCurrentValidator||t.isActive?s.poolActive:s.poolBanned,children:typeof t.isCurrentValidator=="boolean"?t.isCurrentValidator?"Active":t.isActive?"Valid":"Invalid":e.jsx("div",{className:s.loader})}),e.jsx("td",{children:t.stakingAddress?t.stakingAddress:e.jsx("div",{className:s.loader})}),e.jsx("td",{children:t.totalStake?d(t.totalStake).dividedBy(10**18).toFixed(0)+" DMD":e.jsx("div",{className:s.loader})}),e.jsx("td",{children:t.votingPower&&t.votingPower.toString()!=="NaN"&&t.votingPower.toString()!=="Infinity"?`${t.votingPower.toString()} %`:e.jsx("div",{className:s.loader})}),e.jsx("td",{children:t.score!==void 0&&t.score!==null?t.score:e.jsx("div",{className:s.loader})}),C.myAddr?e.jsxs(e.Fragment,{children:[e.jsxs("td",{children:[C.myAddr&&d(t.myStake)?d(t.myStake).dividedBy(10**18).toFixed(0):e.jsx("div",{className:s.loader})," DMD"]}),e.jsx("td",{children:t.isActive&&e.jsx(U,{buttonText:"Stake",pool:t})}),e.jsx("td",{children:d(t.orderedWithdrawAmount).isGreaterThan(0)&&d(t.orderedWithdrawUnlockEpoch).isLessThanOrEqualTo(p)?e.jsx("button",{className:"primaryBtn",onClick:m=>{m.stopPropagation(),V(t)},children:"Claim"}):d(t.myStake).isGreaterThan(0)&&e.jsx(W,{buttonText:"Unstake",pool:t})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]})]},i))})]})}),e.jsxs("ul",{className:s.pagination,children:[e.jsx("li",{onClick:()=>{r!==0&&b(r-1)},className:r===0?s.disabled:"",children:"Previous"}),M(),e.jsx("li",{onClick:()=>{r!==y-1&&b(r+1)},className:r===y-1?s.disabled:"",children:"Next"})]})]})},re=({})=>e.jsx("div",{className:"section",children:e.jsx(se,{})});export{re as default};
